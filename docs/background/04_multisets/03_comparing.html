<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>mathcommands-preproc</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="/media/Data/kenneth/Git/lin539-materials/includes/web-custom.css" />
  <!-- Include this in HTML headers to activate MathJax. -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body>
<h1 id="multiset-relations">Multiset relations</h1>
<div class="prereqs">
<ul>
<li>sets (comparison, powerset)</li>
<li>multisets (operations)</li>
</ul>
</div>
<p>The (proper) subset and superset relations are readily extended to multisets.</p>
<div class="definition">
<p>Given two multisets <span class="math inline">\(A_M\)</span> and <span class="math inline">\(B_M\)</span>, <span class="math inline">\(A_M\)</span> is a subset of <span class="math inline">\(B_M\)</span> (<span class="math inline">\(A_M \subseteq B_M\)</span>) iff it holds for all <span class="math inline">\(a \in A_M\)</span> that <span class="math inline">\(A_M(a) \leq B_M(a)\)</span>. The subset relation is proper (<span class="math inline">\(A_M \subsetneq B_M\)</span>) iff <span class="math inline">\(A_M(a) &lt; B_M(a)\)</span> for all <span class="math inline">\(a \in A_M\)</span>. Superset and proper superset are defined in an analogous fashion.</p>
</div>
<p>Note that this definition of subset entails that the powerset of a multiset can be much larger than that of a set.</p>
<div class="example">
<p>Returning once more to <span class="math inline">\(A_M \mathrel{\mathop:}=\left \{ a:3, b:2, c:1 \right \}\)</span> and <span class="math inline">\(B_M \mathrel{\mathop:}=\left \{ a:1, b:1, c:2, d:1 \right \}\)</span>, we can see immediately that neither is a subset of the other. First, <span class="math inline">\(A_M \not\subseteq B_M\)</span> because <span class="math inline">\(A_M(a) = 3 \not\leq 1 = B_M(a)\)</span>. In the other direction, <span class="math inline">\(B_M \not\subseteq A_M\)</span> because <span class="math inline">\(B_M(d) = 1 \not\leq 0 = A_M(d)\)</span>.</p>
<p>The powerset of <span class="math inline">\(B_M\)</span> contains every multiset that is a subset of <span class="math inline">\(B_M\)</span>. These are</p>
<ul>
<li><span class="math inline">\(\left \{ a:1, b:1, c:2, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:1, c:2, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:1, c:1, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:1, c:1, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:1, c:0, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:1, c:0, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:0, c:2, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:0, c:2, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:0, c:1, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:0, c:1, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:0, c:0, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:0, c:0, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:1, c:2, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:1, c:2, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:1, c:1, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:1, c:1, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:1, c:0, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:1, c:0, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:0, c:2, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:0, c:2, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:0, c:1, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:0, c:1, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:0, c:0, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:0, c:0, d:0 \right \}\)</span></li>
</ul>
<p>The powerset of <span class="math inline">\(B \mathrel{\mathop:}=\left \{ a,b,c,d \right \}\)</span>, on the other hand, has only <span class="math inline">\(2^{\left | B \right |} = 2^4 = 16\)</span> members.</p>
<p>The contrast is even more pronounced when we consider a multiset like <span class="math inline">\(\left \{ a:9 \right \}\)</span>. While <span class="math inline">\(\wp(\left \{ a \right \})\)</span> only consists of <span class="math inline">\(\emptyset\)</span> and <span class="math inline">\(\left \{ a \right \}\)</span>, <span class="math inline">\(\wp(\left \{ a:9 \right \})\)</span> has <span class="math inline">\(10\)</span> members.</p>
</div>
<div class="jupyterpython">
<p>def is_subset(A, B): for a in A.elements(): if A[a] &gt; A[b]: return False return True</p>
<p>def powerset(A): ps = [A] for key in A.keys(): for val in range(A[key]): buffer = [] for subset in ps: subset = subset.copy() subset[key] = val if subset not in buffer: buffer.append(subset) ps += buffer return(ps)</p>
<p>from pprint import pprint from collections import Counter</p>
<p>A = Counter({“a”: 3, “b”: 2, “c”: 1}) B = Counter({“a”: 1, “b”: 1, “c”: 2, “d”: 1})</p>
<p>print(“Powerset of {} is:”.format(B)) pprint(powerset(B))</p>
<p>print() print(“Powerset of {} is:”.format(A)) pprint(powerset(Counter(A)))</p>
</div>
<p>The cardinality of the powerset of a multiset is computed by adding 1 to each count and then multiplying all counts. Again we can express this more precisely and succinctly with a formula:</p>
<p><span class="math display">\[
\left | \wp(S_M) \right | \mathrel{\mathop:}=\prod_{s \in S_M} \left ( S_M(s) + 1 \right )
\]</span></p>
<p>The operator <span class="math inline">\(\prod\)</span> behaves exactly like <span class="math inline">\(\sum\)</span>, except that it is a shorthand for multiplication rather than addition. So the formula above expands to <span class="math inline">\(( S_M(s_1) + 1 ) \times( S_M(s_2) + 1 ) \times\cdots \times( S_M(s_n) + 1 )\)</span>.</p>
<div class="example">
<p>We have already seen that <span class="math inline">\(B_M \mathrel{\mathop:}=\left \{ a:1, b:1, c:2, d:1 \right \}\)</span> has 24 subsets, so its powerset has cardinality 24. Our formula yields exactly the same value.</p>
<p><span class="math display">\[\begin{align*}
    \left | \wp(B_M) \right | &amp;= \prod_{s \in B_M} \left ( B_M(s) + 1 \right )\\
                    &amp;= ( B_M(a) + 1 ) \times( B_M(b) + 1 ) \times( B_M(c) + 1 ) \times(B_M (d) + 1 )\\
                    &amp;= ( 1 + 1 ) \times( 1 + 1 ) \times( 2 + 1 ) \times( 1 + 1 )\\
                    &amp;= 2 \times 2 \times 3 \times 2\\
                    &amp;= 24\\
\end{align*}\]</span></p>
</div>
</body>
</html>
