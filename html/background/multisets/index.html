<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Thomas Graf" />
  <title>background/multisets</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="/media/Data/kenneth/Git/lin539-materials/includes/web-custom.css" />
  <!-- Include this in HTML headers to activate MathJax. -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body>
<header id="title-block-header">
<h1 class="title">background/multisets</h1>
<p class="subtitle">Course Notes for LIN 539</p>
<p class="author">Thomas Graf</p>
<p class="date">Fall 2022</p>
</header>
<p><strong>Prerequisites</strong></p>
<ul>
<li>sets (notation)</li>
</ul>
<h2 id="sets-with-counters-multisets">Sets with counters: Multisets</h2>
<p>Sets are an abstract mathematical object that we may think of as collections in a lose sense. They are sometimes likened to bags, but this can be misleading. While bags convey the intuition that sets are unordered, they are unlike sets in that idempotency does not hold: a bag containing two apples is not the same thing as a bag containing one apple. Bags thus are closer to what mathematicians call <strong>multisets</strong>. Like sets, multisets are unordered, but idempotency does not hold; a multiset can contain multiple instances of the same object.</p>
<div class="definition">
<p>A <strong>multiset</strong> is a set where each element has a numerosity. We indicate that a set <span class="math inline">\(S\)</span> is a multiset by prefixing it with a subscripted <span class="math inline">\(M\)</span>, as in <span class="math inline">\(S_M\)</span>. For all <span class="math inline">\(s \in S_M\)</span>, <span class="math inline">\(S_M(s)\)</span> indicates the numerosity or <strong>count</strong> of <span class="math inline">\(s\)</span> in <span class="math inline">\(S_M\)</span>. We may write <span class="math inline">\(S_M(s) = 0\)</span> instead of <span class="math inline">\(s \notin S_M\)</span>.</p>
</div>
<div class="example">
<p>The multiset <span class="math inline">\(\left \{ a,a,b \right \}_M\)</span> contains two occurrences of <span class="math inline">\(a\)</span> and one occurrence of <span class="math inline">\(b\)</span>. Hence <span class="math inline">\(\left \{ a,a,b \right \}_M \neq \left \{ a,b \right \}_M\)</span> even though <span class="math inline">\(\left \{ a,a,b \right \} = \left \{ a,b \right \}\)</span>. However, it still holds that order does not matter: <span class="math inline">\(\left \{ a,a,b \right \}_M = \left \{ a,b,a \right \}_M = \left \{ b, a, a \right \}_M\)</span>, just like <span class="math inline">\(\left \{ a,b \right \} = \left \{ b,a \right \}\)</span>.</p>
</div>
<div class="exercise">
<p>Fill in the gaps with <span class="math inline">\(=\)</span> and <span class="math inline">\(\neq\)</span> as appropriate.</p>
<ul>
<li><span class="math inline">\(\left \{ 5, 5, 7, 8 \right \}_M \_ \left \{ 7, 5, 8, 7 \right \}_M\)</span></li>
<li><span class="math inline">\(\left \{ 5, 3, 4 \right \} \_ \left \{ 5,3,4,4,3,5,5,4,3 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ \text{peanut butter}, \text{jelly} \right \}_M \_ \left \{ \text{peanut butter}, \text{jelly} \right \}_M\)</span></li>
<li><span class="math inline">\(\left \{ \text{John}, \text{John}, \text{John} \right \}_M \_ \left \{ \text{John} \right \}_M\)</span></li>
<li><span class="math inline">\(\left \{ a \right \}_M \_ \left \{ a,a \right \}\)</span></li>
</ul>
</div>
<p>The notation for multisets is much less standardized than that for sets, and not everybody follows the convention of subscripting multisets with <span class="math inline">\(M\)</span>. If an author uses multisets, pay close attention to how they define their notation. Also, it is often convenient to explicitly list the count of each element rather than listing the element multiple times.</p>
<div class="example">
<p>The multiset <span class="math inline">\(A_M \mathrel{\mathop:}=\left \{ a,a,a,b,b,c \right \}\)</span> can be more conveniently written as <span class="math inline">\(A_M \mathrel{\mathop:}=\left \{ a: 3, b: 2, c: 1 \right \}\)</span>. Elements with a count of <span class="math inline">\(0\)</span> are usually omitted, but may be included if this is relevant information.</p>
</div>
<div class="jupyterpython">
<p>from collections import Counter</p>
<p>def set_equals(A, B): print(“{} same set as {}?”.format(A,B), set(A) == (B))</p>
<p>def multiset_equals(A, B): print(“{} same multiset as {}?”.format(A,B), Counter(A) == Counter(B))</p>
<p>multiset_equals([“a”, “a”, “b”, “b”, “c”], [“a”, “b”, “c”, “c”, “d”]) set_equals([“a”, “a”, “b”, “b”, “c”], [“a”, “b”, “c”, “c”, “d”]) multiset_equals([“a”, “a”, “b”, “b”, “c”], [“a”, “b”, “c”, “a”, “b”])</p>
</div>
<div class="exercise">
<p>Represent all the multisets in the exercise above with explicit counts.</p>
</div>
<p>With this kind of notation, it also becomes possible to define multisets with set-builder notation. For example, <span class="math inline">\(\left \{ n: 2n \mid n \in \mathbb{N} \right \}\)</span> is the set that contains <span class="math inline">\(2n\)</span> occurrences of every natural number <span class="math inline">\(n\)</span>: <span class="math inline">\(\left \{ 0:0, 1:2, 2:4, 3:6, \ldots \right \}\)</span>.</p>
<div class="jupyterpython">
<p>multiset = Counter({n: 2*n for n in range(10)}) print(multiset)</p>
</div>
<div class="exercise">
<p>Write down the multiset defined by each set-builder expression. These are not entirely straight-forward, and you’ll have to make some educated guesses as to how to handle special cases.</p>
<ul>
<li><span class="math inline">\(\left \{ n: 10 - n \mid 0 \leq n \leq 10 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a: b, b: a \mid a,b \geq 0, a + b = 10 \right \}\)</span></li>
</ul>
</div>
<p><strong>Prerequisites</strong></p>
<ul>
<li>sets (operations)</li>
<li>multisets (basics)</li>
</ul>
<h2 id="operations-on-multisets">Operations on multisets</h2>
<h3 id="standard-set-operations">Standard set operations</h3>
<p>The set operations union, intersection and relative complement can be generalized to multisets.</p>
<div class="definition">
<p>Given two natural numbers <span class="math inline">\(m\)</span> and <span class="math inline">\(n\)</span> with <span class="math inline">\(m \leq n\)</span>, let <span class="math inline">\(\max(m,n) = n\)</span> and <span class="math inline">\(\min(m,n) = m\)</span>. Then for any two multisets <span class="math inline">\(A_M\)</span> and <span class="math inline">\(B_M\)</span></p>
<ul>
<li>the union <span class="math inline">\(A_M \cup B_M\)</span> maps every <span class="math inline">\(a\)</span> to <span class="math inline">\(\max(A_M(a), B_M(a))\)</span>,</li>
<li>the intersection <span class="math inline">\(A_M \cap B_M\)</span> maps every <span class="math inline">\(a\)</span> to <span class="math inline">\(\min(A_M(a), B_M(a))\)</span></li>
<li>the relative complement <span class="math inline">\(A_M - B_M\)</span> maps every <span class="math inline">\(a\)</span> to <span class="math inline">\(A_M(a) - B_M(a)\)</span> (or <span class="math inline">\(0\)</span> if the value would be negative)</li>
</ul>
</div>
<div class="example">
<p>Let <span class="math inline">\(A_M \mathrel{\mathop:}=\left \{ a:3, b:2, c:1 \right \}\)</span> and <span class="math inline">\(B_M \mathrel{\mathop:}=\left \{ a:1, b:1, c:2, d:1 \right \}\)</span>. Then</p>
<ul>
<li><span class="math inline">\(A_M \cup B_M = B_M \cup A_M = \left \{ a:3, b:2, c:2, d:1 \right \}\)</span></li>
<li><span class="math inline">\(A_M \cap B_M = B_M \cap A_M = \left \{ a:1, b:1, c:1 \right \}\)</span></li>
<li><span class="math inline">\(A_M - B_M = \left \{ a:2, b:1, c:0 \right \}\)</span></li>
<li><span class="math inline">\(B_M - A_M = \left \{ c:1, d:1 \right \}\)</span></li>
</ul>
</div>
<div class="jupyterpython">
<p>from collections import Counter</p>
<p>A = Counter({“a”: 3, “b”: 2, “c”: 1}) B = Counter({“a”: 1, “b”: 1, “c”: 2, “d”: 1})</p>
<p>def multiset_operator(A, B, function): keys = set(A.keys()).union(set(B.keys())) return Counter({key: function(A.get(key,0), B.get(key,0)) for key in keys})</p>
<p>def multiset_union(A, B): return multiset_operator(A, B, max)</p>
<p>def multiset_intersection(A, B): return multiset_operator(A, B, min)</p>
<p>print(“Union of and is”.format(A, B, multiset_union(A, B))) print(“Intersection of and is”.format(A, B, multiset_intersection(A, B))) print(“Relative complement of and is”.format(A, B, A-B)) print(“Relative complement of and is”.format(B, A, B-A))</p>
</div>
<div class="exercise">
<p>Fill each gap with a matching multiset or operator.</p>
<ul>
<li><span class="math inline">\(\left \{ a:3, b:2, c:1 \right \} \cup \left \{ a:5, b:1, d:8 \right \} = \_\)</span></li>
<li><span class="math inline">\(\left \{ c:17 \right \} \_ \left \{ a:5, b:1, d:8 \right \} = \left \{ c:17 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:3, b:3 \right \} \cup \_ = \left \{ a:5, b:3, c:5, d:6 \right \}\)</span></li>
<li><span class="math inline">\(\_\ \_ \left \{ a:5, b:1, d:8 \right \} = \left \{ a:3, b:1 \right \}\)</span></li>
</ul>
</div>
<h3 id="special-operations-for-multisets">Special operations for multisets</h3>
<p>Since multisets are a generalization of sets, they allow for certain operations that would not make much sense with sets. These are <em>multiset sum</em> (<span class="math inline">\(\uplus\)</span>) and <em>scalar multiplication </em> (<span class="math inline">\(\otimes\)</span>).</p>
<div class="definition">
<p>Let <span class="math inline">\(A_M\)</span> and <span class="math inline">\(B_M\)</span> be two multisets and <span class="math inline">\(n\)</span> a natural number. Then</p>
<ul>
<li>the multiset sum <span class="math inline">\(A_M \uplus B_M\)</span> maps every <span class="math inline">\(a\)</span> to <span class="math inline">\(A_M(a) + B_M(a)\)</span>,</li>
<li>the scalar multiplication <span class="math inline">\(n \otimes A_M\)</span> maps every <span class="math inline">\(a\)</span> to <span class="math inline">\(n \times A_M(a)\)</span> (where <span class="math inline">\(\times\)</span> denotes multiplication over natural numbers).</li>
</ul>
</div>
<div class="example">
<p>As in the previous examples, we will look at the multisets <span class="math inline">\(A_M \mathrel{\mathop:}=\left \{ a:3, b:2, c:1 \right \}\)</span> and <span class="math inline">\(B_M \mathrel{\mathop:}=\left \{ a:1, b:1, c:2, d:1 \right \}\)</span>. For those two sets, <span class="math inline">\(A_M \uplus B_M \mathrel{\mathop:}=\left \{ a:4, b:3, c:3, d:1 \right \}\)</span>, which is identical to <span class="math inline">\(B_M \uplus A_M\)</span>. Furthermore, <span class="math inline">\(3 \otimes A_M = \left \{ a:9, b:6, c:3 \right \}\)</span> whereas <span class="math inline">\(3 \otimes B_M = \left \{ a:3, b:3, c:6, d:3 \right \}\)</span>.</p>
</div>
<div class="jupyterpython">
<p>def scalar_multiplication(A, n): return Counter({key: n * val for key, val in A.items()})</p>
<p>print(“{} + {} = {}”.format(A, B, A+B)) print(“{} * {} = {}”.format(3, A, scalar_multiplication(A, 3))) print(“{} * {} = {}”.format(3, B, scalar_multiplication(B, 3)))</p>
</div>
<div class="exercise">
<p>Calculate the final result of the equations below. If the result cannot be uniquely determined without additional assumptions, explain why.</p>
<ul>
<li><span class="math inline">\(3 \otimes\big( (\left \{ a:5, b:3 \right \}_M \uplus\left \{ a:1, c:5, d:6 \right \}_M) - (\left \{ a:5, b:3 \right \}_M \cap \left \{ a:1, c:5, d:6 \right \}_M) \big )\)</span></li>
<li><span class="math inline">\(\left \{ \text{John}, \text{John} \right \} \uplus 3 \otimes\left \{ \text{Mary}, \text{Mary}, \text{Mary}, \text{John} \right \}_M\)</span></li>
<li><span class="math inline">\(\left \{ a:5, c:1 \right \}_M \cup \left \{ a:3, b:3, c:3, d:3 \right \}_M \uplus\left \{ a:1 \right \}_M\)</span></li>
</ul>
</div>
<p><strong>Prerequisites</strong></p>
<ul>
<li>general (big operators)</li>
<li>sets (cardinality)</li>
<li>multisets (operations)</li>
</ul>
<h2 id="cardinality-of-multisets">Cardinality of multisets</h2>
<p>Given a multiset <span class="math inline">\(S_M\)</span>, we write <span class="math inline">\(S_M(a)\)</span> for the count of <span class="math inline">\(a\)</span> in <span class="math inline">\(S_M\)</span>.</p>
<div class="example">
<p>Let <span class="math inline">\(A_M \mathrel{\mathop:}=\left \{ a:3, b:2, c:1 \right \}\)</span> and <span class="math inline">\(B_M \mathrel{\mathop:}=\left \{ a:1, b:1, c:1, d:1 \right \}\)</span>. Then <span class="math inline">\(A_M(a) = 3\)</span> and <span class="math inline">\(B_M(a) = 1\)</span>, whereas <span class="math inline">\(A_M(c) = B_M(c) = 1\)</span>.</p>
</div>
<p>The <strong>cardinality</strong> of a multiset with finitely many elements is the sum of all its counts. As a formula, this looks as follows:</p>
<p><span class="math display">\[
    \left | S_M \right | \mathrel{\mathop:}=\sum_{s \in S_M} S_M(s)
\]</span></p>
<p>This formula uses the symbol <span class="math inline">\(\sum\)</span> as an abbreviation for addition. The subscript on <span class="math inline">\(\sum\)</span> tells us that <span class="math inline">\(s\)</span> should be substituted in all possible ways by elements of <span class="math inline">\(S_M\)</span>. For multiset <span class="math inline">\(S_M \mathrel{\mathop:}=\left \{ s_1: c_1, s_2: c_2, \ldots , s_n: c_n \right \}\)</span> the formula expands to <span class="math inline">\(S_M(s_1) + S_M(s_2) + \cdots + S_M(s_n)\)</span>, which in turn reduces to <span class="math inline">\(c_1 + c_2 + \cdots + c_n\)</span>.</p>
<div class="example">
<p>Consider once more the multisets <span class="math inline">\(A_M \mathrel{\mathop:}=\left \{ a:3, b:2, c:1 \right \}\)</span> and <span class="math inline">\(B_M \mathrel{\mathop:}=\left \{ a:1, b:1, c:2, d:1 \right \}\)</span>, for which the following hold:</p>
<p><span class="math display">\[\begin{align*}
    \left | A_M \right | &amp;= \sum_{s \in A_M} A_M(s)\\
               &amp;= A_M(a) + A_M(b) + A_M(c)\\
               &amp;= 3 + 2 + 1\\
               &amp;= 6\\
    \left | B_M \right | &amp;= \sum_{s \in B_M} B_M(s)\\
               &amp;= B_M(a) + B_M(b) + B_M(c) + B_M(d)\\
               &amp;= 1 + 1 + 2 + 1\\
               &amp;= 5\\
    \left | A_M \cup B_M \right | &amp;= 8\\
    \left | A_M \cap B_M \right | &amp;= 3\\
    \left | A_M - B_M \right | &amp;= 3\\
    \left | B_M - A_M \right | &amp;= 2\\
\end{align*}\]</span></p>
</div>
<div class="jupyterpython">
<p>def card(multiset): return sum(multiset.values())</p>
<p>print(“|{}| = {}”.format(A, card(A))) print(“|{}| = {}”.format(B, card(B))) print(“Union of {} and {} is {}”.format(A, B, multiset_union(A, B))) print(“Intersection of {} and {} is {}”.format(A, B, multiset_intersection(A, B))) print(“Relative complement of {} and {} is {}”.format(A, B, A-B))</p>
</div>
<div class="exercise">
<p>Calculate the cardinality of the following multisets:</p>
<ul>
<li><span class="math inline">\(\left \{ a:17 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ \text{John}: 5, \text{Mary}: 5, \text{Bill}: 10 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a: 0, b: 0, c:0 \right \}\)</span></li>
</ul>
</div>
<p><strong>Prerequisites</strong></p>
<ul>
<li>sets (comparison, powerset)</li>
<li>multisets (operations)</li>
</ul>
<h2 id="multiset-relations">Multiset relations</h2>
<p>The (proper) subset and superset relations are readily extended to multisets.</p>
<div class="definition">
<p>Given two multisets <span class="math inline">\(A_M\)</span> and <span class="math inline">\(B_M\)</span>, <span class="math inline">\(A_M\)</span> is a subset of <span class="math inline">\(B_M\)</span> (<span class="math inline">\(A_M \subseteq B_M\)</span>) iff it holds for all <span class="math inline">\(a \in A_M\)</span> that <span class="math inline">\(A_M(a) \leq B_M(a)\)</span>. The subset relation is proper (<span class="math inline">\(A_M \subsetneq B_M\)</span>) iff <span class="math inline">\(A_M(a) &lt; B_M(a)\)</span> for all <span class="math inline">\(a \in A_M\)</span>. Superset and proper superset are defined in an analogous fashion.</p>
</div>
<p>Note that this definition of subset entails that the powerset of a multiset can be much larger than that of a set.</p>
<div class="example">
<p>Returning once more to <span class="math inline">\(A_M \mathrel{\mathop:}=\left \{ a:3, b:2, c:1 \right \}\)</span> and <span class="math inline">\(B_M \mathrel{\mathop:}=\left \{ a:1, b:1, c:2, d:1 \right \}\)</span>, we can see immediately that neither is a subset of the other. First, <span class="math inline">\(A_M \not\subseteq B_M\)</span> because <span class="math inline">\(A_M(a) = 3 \not\leq 1 = B_M(a)\)</span>. In the other direction, <span class="math inline">\(B_M \not\subseteq A_M\)</span> because <span class="math inline">\(B_M(d) = 1 \not\leq 0 = A_M(d)\)</span>.</p>
<p>The powerset of <span class="math inline">\(B_M\)</span> contains every multiset that is a subset of <span class="math inline">\(B_M\)</span>. These are</p>
<ul>
<li><span class="math inline">\(\left \{ a:1, b:1, c:2, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:1, c:2, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:1, c:1, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:1, c:1, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:1, c:0, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:1, c:0, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:0, c:2, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:0, c:2, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:0, c:1, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:0, c:1, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:0, c:0, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:1, b:0, c:0, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:1, c:2, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:1, c:2, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:1, c:1, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:1, c:1, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:1, c:0, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:1, c:0, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:0, c:2, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:0, c:2, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:0, c:1, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:0, c:1, d:0 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:0, c:0, d:1 \right \}\)</span></li>
<li><span class="math inline">\(\left \{ a:0, b:0, c:0, d:0 \right \}\)</span></li>
</ul>
<p>The powerset of <span class="math inline">\(B \mathrel{\mathop:}=\left \{ a,b,c,d \right \}\)</span>, on the other hand, has only <span class="math inline">\(2^{\left | B \right |} = 2^4 = 16\)</span> members.</p>
<p>The contrast is even more pronounced when we consider a multiset like <span class="math inline">\(\left \{ a:9 \right \}\)</span>. While <span class="math inline">\(\wp(\left \{ a \right \})\)</span> only consists of <span class="math inline">\(\emptyset\)</span> and <span class="math inline">\(\left \{ a \right \}\)</span>, <span class="math inline">\(\wp(\left \{ a:9 \right \})\)</span> has <span class="math inline">\(10\)</span> members.</p>
</div>
<div class="jupyterpython">
<p>def is_subset(A, B): for a in A.elements(): if A[a] &gt; A[b]: return False return True</p>
<p>def powerset(A): ps = [A] for key in A.keys(): for val in range(A[key]): buffer = [] for subset in ps: subset = subset.copy() subset[key] = val if subset not in buffer: buffer.append(subset) ps += buffer return(ps)</p>
<p>from pprint import pprint from collections import Counter</p>
<p>A = Counter({“a”: 3, “b”: 2, “c”: 1}) B = Counter({“a”: 1, “b”: 1, “c”: 2, “d”: 1})</p>
<p>print(“Powerset of {} is:”.format(B)) pprint(powerset(B))</p>
<p>print() print(“Powerset of {} is:”.format(A)) pprint(powerset(Counter(A)))</p>
</div>
<p>The cardinality of the powerset of a multiset is computed by adding 1 to each count and then multiplying all counts. Again we can express this more precisely and succinctly with a formula:</p>
<p><span class="math display">\[
\left | \wp(S_M) \right | \mathrel{\mathop:}=\prod_{s \in S_M} \left ( S_M(s) + 1 \right )
\]</span></p>
<p>The operator <span class="math inline">\(\prod\)</span> behaves exactly like <span class="math inline">\(\sum\)</span>, except that it is a shorthand for multiplication rather than addition. So the formula above expands to <span class="math inline">\(( S_M(s_1) + 1 ) \times( S_M(s_2) + 1 ) \times\cdots \times( S_M(s_n) + 1 )\)</span>.</p>
<div class="example">
<p>We have already seen that <span class="math inline">\(B_M \mathrel{\mathop:}=\left \{ a:1, b:1, c:2, d:1 \right \}\)</span> has 24 subsets, so its powerset has cardinality 24. Our formula yields exactly the same value.</p>
<p><span class="math display">\[\begin{align*}
    \left | \wp(B_M) \right | &amp;= \prod_{s \in B_M} \left ( B_M(s) + 1 \right )\\
                    &amp;= ( B_M(a) + 1 ) \times( B_M(b) + 1 ) \times( B_M(c) + 1 ) \times(B_M (d) + 1 )\\
                    &amp;= ( 1 + 1 ) \times( 1 + 1 ) \times( 2 + 1 ) \times( 1 + 1 )\\
                    &amp;= 2 \times 2 \times 3 \times 2\\
                    &amp;= 24\\
\end{align*}\]</span></p>
</div>
<p><strong>Prerequisites</strong></p>
<ul>
<li>sets</li>
<li>functions (notation)</li>
<li>general (numbers)</li>
</ul>
<h2 id="sets-as-instances-of-multisets">Sets as instances of multisets</h2>
<p>Multisets are a natural generalization of sets. But if this is true, then sets should fall out as just a special case of multisets. Let us see if this is true.</p>
<p>First, every set <span class="math inline">\(S\)</span> can be regarded as a multiset with co-domain <span class="math inline">\(\mathbb{N}\)</span> but range <span class="math inline">\(\left \{ 0,1 \right \}\)</span>. All the members of <span class="math inline">\(S\)</span> are mapped to <span class="math inline">\(1\)</span>, everything else to <span class="math inline">\(0\)</span>. So far so good. Now consider the set operations union, intersection, and relative complement. For multisets <span class="math inline">\(A_M\)</span> and <span class="math inline">\(B_M\)</span>, <span class="math inline">\(A_M \cup B_M\)</span> maps every <span class="math inline">\(a\)</span> to <span class="math inline">\(\max(A_M(a), B_M(a))\)</span>. For sets, the only two possible values for <span class="math inline">\(A_M(a)\)</span> and <span class="math inline">\(B_M(a)\)</span> are <span class="math inline">\(0\)</span> and <span class="math inline">\(1\)</span>. Let’s consider each scenario in turn with union:</p>
<ul>
<li><span class="math inline">\(a \in A\)</span>, <span class="math inline">\(a \in B\)</span>, so <span class="math inline">\(a \in A \cup B\)</span>; then <span class="math inline">\(A_M(a) = B_M(a) = 1\)</span>, and <span class="math inline">\(\max(1,1) = 1\)</span>, whence <span class="math inline">\(a \in A_M \cup B_M\)</span>.</li>
<li><span class="math inline">\(a \in A\)</span>, <span class="math inline">\(a \notin B\)</span>, so <span class="math inline">\(a \in A \cup B\)</span>; then <span class="math inline">\(A_M(a) = 1\)</span>, <span class="math inline">\(B_M(a) = 0\)</span>, and <span class="math inline">\(\max(1,0) = 1\)</span>, whence <span class="math inline">\(a \in A_M \cup B_M\)</span>.</li>
<li><span class="math inline">\(a \notin A\)</span>, <span class="math inline">\(a \in B\)</span>, so <span class="math inline">\(a \in A \cup B\)</span>; then <span class="math inline">\(A_M(a) = 0\)</span>, <span class="math inline">\(B_M(a) = 1\)</span>, and <span class="math inline">\(\max(1,0) = 1\)</span>, whence <span class="math inline">\(a \in A_M \cup B_M\)</span>.</li>
<li><span class="math inline">\(a \notin A\)</span>, <span class="math inline">\(a \notin b\)</span>, so <span class="math inline">\(a \notin A \cup B\)</span>; then <span class="math inline">\(A_M(a) = 0\)</span>, <span class="math inline">\(B_M(a) = 0\)</span>, and <span class="math inline">\(\max(0,0) = 0\)</span>, whence <span class="math inline">\(a \notin A_M \cup B_M\)</span>.</li>
</ul>
<p>Intersection and relative complement work in exactly the same fashion.</p>
<p>Even the formula for cardinality works as expected: given a set <span class="math inline">\(A\)</span>, <span class="math inline">\(\left | A \right |\)</span> is the number of elements it contains, whereas <span class="math inline">\(\left | A_M \right |\)</span> is the sum of the counts of each element. But since every <span class="math inline">\(a \in A_M\)</span> has a count of <span class="math inline">\(1\)</span>, this sum is the same as <span class="math inline">\(\left | A \right |\)</span>:</p>
<p><span class="math display">\[\begin{align*}
    \left | A_M \right |  &amp; = \sum_{a \in A_M} A_M(a)\\
                &amp; = A_M(a_1) + \cdots + A_M(a_n)\\
                &amp; = 1 + \cdots + 1\\
                &amp; = \left | A \right |
\end{align*}\]</span></p>
<p>We can even confirm why the cardinality of the powerset of some set <span class="math inline">\(S\)</span> must be <span class="math inline">\(2^{\left | S \right |}\)</span>. The formula for calculating the cardinality of the powerset of a multiset <span class="math inline">\(S_M\)</span> is <span class="math inline">\(\prod_{s \in S_M} (S_M(s) + 1)\)</span>. Every member of a set has a count of <span class="math inline">\(1\)</span>, for a set <span class="math inline">\(S\)</span> this formula expands to <span class="math inline">\(\prod_{s \in S} (1 + 1) = \prod_s{ \in S}\)</span>. So if <span class="math inline">\(S\)</span> has <span class="math inline">\(n\)</span> members, the cardinality of <span class="math inline">\(\wp(S)\)</span> is <span class="math display">\[
\underbrace{2 \times \cdots \times 2}_{n \text{ times}}.
\]</span> But that is the same as <span class="math inline">\(2^n\)</span>, which is the same as <span class="math inline">\(2^{\left | S \right |}\)</span>. It all fits together exactly as it should.</p>
<p>This shows that multisets are indeed a faithful generalization of sets. And it also gives us a good example of how one and the same object can be viewed in multiple ways.</p>
</body>
</html>
